@model Pivec.Promotion.Web.ViewModels.CustomerSearchViewModel

@{
    ViewBag.Title = "Registered Customers";
}

<h2>Registered Customers</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('.date').datepicker({ dateFormat: "mm/dd/yy" });
    });
</script>

@using (Html.BeginForm())
 {
     <div>
         @Html.ValidationSummary(true)

         <fieldset>
             <legend>Filters</legend>

             <div class="editor-label">
                 @Html.LabelFor(model => model.DealerId)
             </div>
             <div class="editor-field">
                 @Html.DropDownList("DealerId", "All")
                 @Html.ValidationMessageFor(model => model.DealerId)
             </div>

             <div class="editor-label">
                 @Html.LabelFor(model => model.SalespersonCode)
             </div>
             <div class="editor-field">
                 @Html.EditorFor(model => model.SalespersonCode)
                 @Html.ValidationMessageFor(model => model.SalespersonCode)
             </div>

             <div class="editor-label">
                 @Html.LabelFor(model => model.DateFrom)
             </div>
             <div class="editor-field">
                @Html.TextBox("DateFrom", (Model.DateFrom.HasValue ? Model.DateFrom.Value.ToShortDateString() : string.Empty), new { @class = "date" })
             </div>

             <div class="editor-label">
                 @Html.LabelFor(model => model.DateTo)
             </div>
             <div class="editor-field">
                @Html.TextBox("DateTo", (Model.DateTo.HasValue ? Model.DateTo.Value.ToShortDateString() : string.Empty), new { @class = "date" })
             </div>

             <p>
                 <input type="submit" value="Search" />
             </p>
         </fieldset>
     </div>
 }  
    
<table>
    <tr>
        <th>
            Promotion
        </th>
        <th>
            Dealer
        </th>
        <th>
            Salesperson Code
        </th>
        <th>
            First Name
        </th>
        <th>
            Last Name
        </th>
        <th>
            Street Address
        </th>
        <th>
            City
        </th>
        <th>
            State
        </th>
        <th>
            Zip Code
        </th>
        <th>
            Email
        </th>
        <th>
            Date Created
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.Customers)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Promotion.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Dealer.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SalespersonCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.StreetAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.City)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.State)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ZipCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateCreated)
        </td>
    </tr>
}

</table>

@Html.ActionLink("Export to Excel", "Export", "Customer")